var Y=Object.defineProperty;var F=(e,t,n)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var A=(e,t,n)=>(F(e,typeof t!="symbol"?t+"":t,n),n);import{s as k,w as D,r as L,g as I,o as j,n as $,u as Q,a as V,b as G,c as W,d as S,e as T,f as N,h as U,i as J}from"./index-9ca5bf5c.js";function K(e,t){var n;const o=k();return D(()=>{o.value=e()},{...t,flush:(n=t==null?void 0:t.flush)!=null?n:"sync"}),L(o)}function z(e){return V()?(G(e),!0):!1}function _(e){return typeof e=="function"?e():Q(e)}const Z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ee=Object.prototype.toString,te=e=>ee.call(e)==="[object Object]",O=()=>{};function ne(e,t){function n(...o){return new Promise((i,u)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(u)})}return n}function oe(e,t={}){let n,o,i=O;const u=a=>{clearTimeout(a),i(),i=O};return a=>{const c=_(e),l=_(t.maxWait);return n&&u(n),c<=0||l!==void 0&&l<=0?(o&&(u(o),o=null),Promise.resolve(a())):new Promise((f,s)=>{i=t.rejectOnCancel?s:f,l&&!o&&(o=setTimeout(()=>{n&&u(n),o=null,f(a())},l)),n=setTimeout(()=>{o&&u(o),o=null,f(a())},c)})}}function se(e,t=200,n={}){return ne(oe(t,n),e)}function re(e,t=!0){I()?j(e):t?e():$(e)}function w(e){var t;const n=_(e);return(t=n==null?void 0:n.$el)!=null?t:n}const q=Z?window:void 0;function C(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=q):[t,n,o,i]=e,!t)return O;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const u=[],r=()=>{u.forEach(f=>f()),u.length=0},a=(f,s,d,p)=>(f.addEventListener(s,d,p),()=>f.removeEventListener(s,d,p)),c=T(()=>[w(t),_(i)],([f,s])=>{if(r(),!f)return;const d=te(s)?{...s}:s;u.push(...n.flatMap(p=>o.map(v=>a(f,p,v,d))))},{immediate:!0,flush:"post"}),l=()=>{c(),r()};return z(l),l}function ue(){const e=S(!1);return I()&&j(()=>{e.value=!0}),e}function ce(e){const t=ue();return W(()=>(t.value,!!e()))}function ae(e,t,n={}){const{window:o=q,...i}=n;let u;const r=ce(()=>o&&"ResizeObserver"in o),a=()=>{u&&(u.disconnect(),u=void 0)},c=W(()=>Array.isArray(e)?e.map(s=>w(s)):[w(e)]),l=T(c,s=>{if(a(),r.value&&o){u=new ResizeObserver(t);for(const d of s)d&&u.observe(d,i)}},{immediate:!0,flush:"post",deep:!0}),f=()=>{a(),l()};return z(f),{isSupported:r,stop:f}}function ie(e,t={width:0,height:0},n={}){const{window:o=q,box:i="content-box"}=n,u=W(()=>{var s,d;return(d=(s=w(e))==null?void 0:s.namespaceURI)==null?void 0:d.includes("svg")}),r=S(t.width),a=S(t.height),{stop:c}=ae(e,([s])=>{const d=i==="border-box"?s.borderBoxSize:i==="content-box"?s.contentBoxSize:s.devicePixelContentBoxSize;if(o&&u.value){const p=w(e);if(p){const v=o.getComputedStyle(p);r.value=Number.parseFloat(v.width),a.value=Number.parseFloat(v.height)}}else if(d){const p=Array.isArray(d)?d:[d];r.value=p.reduce((v,{inlineSize:m})=>v+m,0),a.value=p.reduce((v,{blockSize:m})=>v+m,0)}else r.value=s.contentRect.width,a.value=s.contentRect.height},n);re(()=>{const s=w(e);s&&(r.value="offsetWidth"in s?s.offsetWidth:t.width,a.value="offsetHeight"in s?s.offsetHeight:t.height)});const l=T(()=>w(e),s=>{r.value=s?t.width:0,a.value=s?t.height:0});function f(){c(),l()}return{width:r,height:a,stop:f}}const le={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function fe(e={}){const{type:t="page",touch:n=!0,resetOnTouchEnds:o=!1,initialValue:i={x:0,y:0},window:u=q,target:r=u,scroll:a=!0,eventFilter:c}=e;let l=null;const f=S(i.x),s=S(i.y),d=S(null),p=typeof t=="function"?t:le[t],v=h=>{const y=p(h);l=h,y&&([f.value,s.value]=y,d.value="mouse")},m=h=>{if(h.touches.length>0){const y=p(h.touches[0]);y&&([f.value,s.value]=y,d.value="touch")}},M=()=>{if(!l||!u)return;const h=p(l);l instanceof MouseEvent&&h&&(f.value=h[0]+u.scrollX,s.value=h[1]+u.scrollY)},x=()=>{f.value=i.x,s.value=i.y},g=c?h=>c(()=>v(h),{}):h=>v(h),E=c?h=>c(()=>m(h),{}):h=>m(h),b=c?()=>c(()=>M(),{}):()=>M();if(r){const h={passive:!0};C(r,["mousemove","dragover"],g,h),n&&t!=="movement"&&(C(r,["touchstart","touchmove"],E,h),o&&C(r,"touchend",x,h)),a&&t==="page"&&C(u,"scroll",b,{passive:!0})}return{x:f,y:s,sourceType:d}}class he{constructor(t){A(this,"queue",[]);this.maxLength=t}get length(){return this.queue.length}enqueue(t){if(!this.queue.includes(t)&&(this.queue.push(t),this.queue.length>this.maxLength))return this.queue.shift()}dequeue(){return this.queue.shift()}clear(){this.queue=[]}forEach(t){this.queue.forEach(t)}has(t){return this.queue.includes(t)}}function de(e,t,n,o){const i=e.x-t,u=e.y-n;return Math.sqrt(i*i+u*u)<=o}function pe(e,t){e.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEach(n=>{e.beginPath(),e.arc(n.x,n.y,1,0,Math.PI*2),e.closePath(),e.fillStyle="#525252",e.fill()})}function H(e,t){e.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEach((n,o)=>{const{x:i,y:u}=n,r=Math.min(t.length-o+.5,8),a=i-r/2,c=u-r/2,l=Math.min(Math.round(r/2),2);e.beginPath(),e.moveTo(a+l,c),e.arcTo(a+r,c,a+r,c+l,l),e.lineTo(a+r,c+r-l),e.arcTo(a+r,c+r,a+r-l,c+r,l),e.lineTo(a+l,c+r),e.arcTo(a,c+r,a,c+r-l,l),e.lineTo(a,c+l),e.arcTo(a,c,a+l,c,l),e.closePath(),e.fillStyle=ve("#a5b4fc","#1e1b4b",o/t.length),e.fill()})}function ve(e,t,n){const o=P(e),i=P(t),u=Math.round(o.r+(i.r-o.r)*n),r=Math.round(o.g+(i.g-o.g)*n),a=Math.round(o.b+(i.b-o.b)*n);return me(u,r,a)}function P(e){const t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return{r:t,g:n,b:o}}function me(e,t,n){const o=e.toString(16).padStart(2,"0"),i=t.toString(16).padStart(2,"0"),u=n.toString(16).padStart(2,"0");return`#${o}${i}${u}`}function B(){const e=document.createElement("canvas");return e.style.position="absolute",e.style.width="100%",e.style.height="100%",e}function ge(e){const{gap:t,queueSize:n,target:o}=e,{width:i,height:u}=ie(o),{x:r,y:a}=fe({target:o}),c=new he(n),l=K(()=>{const g=Math.round(i.value/t)-1,E=Math.round(u.value/t)-1,b=[];for(let h=0;h<g;h++){const y=(h+1)*t;for(let R=0;R<E;R++){const X=(R+1)*t;b.push({x:y,y:X})}}return b}),f=B(),s=B(),d=f.getContext("2d",{alpha:!1}),p=s.getContext("2d"),v=()=>{d&&(f.width=i.value,f.height=u.value,pe(d,l.value)),c.clear(),p&&(s.width=i.value,s.height=u.value,H(p,c))};let m;const M=se(()=>{m=setInterval(()=>{c.length>0?(c.dequeue(),p&&H(p,c)):(clearInterval(m),m=void 0)},10)},500),x=T(()=>w(o),g=>{g&&(x(),g.appendChild(f),g.appendChild(s))});T(l,v,{immediate:!0}),T([r,a],([g,E])=>{m&&(clearInterval(m),m=void 0);const b=l.value.find(h=>de(h,g,E,t/2+.9));b&&!c.has(b)&&(c.enqueue(b),p&&H(p,c)),M()})}const ye=N({__name:"PageView",setup(e){const t=S();return ge({target:t,gap:14,queueSize:50}),(n,o)=>(J(),U("div",{ref_key:"domRef",ref:t,"h-screen":"","w-screen":""},null,512))}});export{ye as default};
